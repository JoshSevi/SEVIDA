/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==c)throw new i;const l=s<<2|o>>4;if(r.push(l),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==c){const t=a<<6&192|c;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r=function(t){return function(t){const i=e(t);return n.encodeByteArray(i,!0)}(t).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){try{return"object"==typeof indexedDB}catch(t){return!1}}function u(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d.prototype.create)}}class d{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(f,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new h(i,o,n)}}const f=/\{\$([^}]+)}/g;function p(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(g(n)&&g(s)){if(!p(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function g(t){return null!==t&&"object"==typeof t}const m=1e3,y=2,v=144e5,w=.5;function b(t,e=m,n=y){const i=e*Math.pow(n,t),r=Math.round(w*i*(Math.random()-.5)*2);return Math.min(v,i+r)}function E(t){return t&&t._delegate?t._delegate:t}class I{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const T="[DEFAULT]";class S{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:T})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=T){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=T){return this.instances.has(t)}getOptions(t=T){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===T?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=T){return this.component?this.component.multipleInstances?t:T:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new S(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const A=[];var C;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(C||(C={}));const D={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},N=C.INFO,k={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},O=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=k[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class x{constructor(t){this.name=t,this._logLevel=N,this._logHandler=O,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in C))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?D[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...t),this._logHandler(this,C.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...t),this._logHandler(this,C.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,C.INFO,...t),this._logHandler(this,C.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,C.WARN,...t),this._logHandler(this,C.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...t),this._logHandler(this,C.ERROR,...t)}}const R=(t,e)=>e.some((e=>t instanceof e));let L,P;const M=new WeakMap,F=new WeakMap,V=new WeakMap,U=new WeakMap,B=new WeakMap;let j={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return F.get(t);if("objectStoreNames"===e)return t.objectStoreNames||V.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return q(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function $(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(P||(P=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(z(this),t),q(M.get(this))}:function(...t){return q(e.apply(z(this),t))}:function(t,...n){const i=e.call(z(this),t,...n);return V.set(i,t.sort?t.sort():[t]),q(i)}:(t instanceof IDBTransaction&&function(t){if(F.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));F.set(t,e)}(t),R(t,L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,j):t);var e}function q(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(q(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&M.set(e,t)})).catch((()=>{})),B.set(e,t),e}(t);if(U.has(t))return U.get(t);const e=$(t);return e!==t&&(U.set(t,e),B.set(e,t)),e}const z=t=>B.get(t);function K(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=q(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(q(o.result),t.oldVersion,t.newVersion,q(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const H=["get","getKey","getAll","getAllKeys","count"],G=["put","add","delete","clear"],Q=new Map;function W(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Q.get(e))return Q.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=G.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!H.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Q.set(e,s),s}var X;X=j,j={...X,get:(t,e,n)=>W(t,e)||X.get(t,e,n),has:(t,e)=>!!W(t,e)||X.has(t,e)};class J{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Y="@firebase/app",Z="0.9.27",tt=new x("@firebase/app"),et="[DEFAULT]",nt={[Y]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,rt=new Map;function st(t,e){try{t.container.addComponent(e)}catch(n){tt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ot(t){const e=t.name;if(rt.has(e))return tt.debug(`There were multiple attempts to register component ${e}.`),!1;rt.set(e,t);for(const e of it.values())st(e,t);return!0}function at(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const ct=new d("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class lt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new I("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}function ut(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:et,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw ct.create("bad-app-name",{appName:String(r)});if(n||(n=o()),!n)throw ct.create("no-options");const s=it.get(r);if(s){if(p(n,s.options)&&p(i,s.config))return s;throw ct.create("duplicate-app",{appName:r})}const a=new _(r);for(const t of rt.values())a.addComponent(t);const c=new lt(n,i,a);return it.set(r,c),c}function ht(t=et){const e=it.get(t);if(!e&&t===et&&o())return ut();if(!e)throw ct.create("no-app",{appName:t});return e}function dt(t,e,n){var i;let r=null!==(i=nt[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void tt.warn(t.join(" "))}ot(new I(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const ft="firebase-heartbeat-database",pt=1,gt="firebase-heartbeat-store";let mt=null;function yt(){return mt||(mt=K(ft,pt,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(gt)}catch(t){console.warn(t)}}}).catch((t=>{throw ct.create("idb-open",{originalErrorMessage:t.message})}))),mt}async function vt(t,e){try{const n=(await yt()).transaction(gt,"readwrite"),i=n.objectStore(gt);await i.put(e,wt(t)),await n.done}catch(t){if(t instanceof h)tt.warn(t.message);else{const e=ct.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});tt.warn(e.message)}}}function wt(t){return`${t.name}!${t.options.appId}`}class bt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new It(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Et();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Et(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Tt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Tt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),s=r(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Et(){return(new Date).toISOString().substring(0,10)}class It{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!l()&&u().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await yt()).transaction(gt),n=await e.objectStore(gt).get(wt(t));return await e.done,n}catch(t){if(t instanceof h)tt.warn(t.message);else{const e=ct.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});tt.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Tt(t){return r(JSON.stringify({version:2,heartbeats:t})).length}ot(new I("platform-logger",(t=>new J(t)),"PRIVATE")),ot(new I("heartbeat",(t=>new bt(t)),"PRIVATE")),dt(Y,Z,""),dt(Y,Z,"esm2017"),dt("fire-js",""),dt("firebase","10.8.0","app");const St="@firebase/installations",_t="0.6.5",At=1e4,Ct=`w:${_t}`,Dt="FIS_v2",Nt="https://firebaseinstallations.googleapis.com/v1",kt=36e5,Ot=new d("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xt(t){return t instanceof h&&t.code.includes("request-failed")}function Rt({projectId:t}){return`${Nt}/projects/${t}/installations`}function Lt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Pt(t,e){const n=(await e.json()).error;return Ot.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Mt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Ft(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Vt(t){return new Promise((e=>{setTimeout(e,t)}))}const Ut=/^[cdef][\w-]{21}$/,Bt="";function jt(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return Ut.test(e)?e:Bt}catch(t){return Bt}}function $t(t){return`${t.appName}!${t.appId}`}const qt=new Map;function zt(t,e){const n=$t(t);Kt(n,e),function(t,e){const n=(!Ht&&"BroadcastChannel"in self&&(Ht=new BroadcastChannel("[Firebase] FID Change"),Ht.onmessage=t=>{Kt(t.data.key,t.data.fid)}),Ht);n&&n.postMessage({key:t,fid:e}),0===qt.size&&Ht&&(Ht.close(),Ht=null)}(n,e)}function Kt(t,e){const n=qt.get(t);if(n)for(const t of n)t(e)}let Ht=null;const Gt="firebase-installations-database",Qt=1,Wt="firebase-installations-store";let Xt=null;function Jt(){return Xt||(Xt=K(Gt,Qt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Wt)}})),Xt}async function Yt(t,e){const n=$t(t),i=(await Jt()).transaction(Wt,"readwrite"),r=i.objectStore(Wt),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||zt(t,e.fid),e}async function Zt(t){const e=$t(t),n=(await Jt()).transaction(Wt,"readwrite");await n.objectStore(Wt).delete(e),await n.done}async function te(t,e){const n=$t(t),i=(await Jt()).transaction(Wt,"readwrite"),r=i.objectStore(Wt),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||zt(t,o.fid),o}async function ee(t){let e;const n=await te(t.appConfig,(n=>{const i=function(t){return re(t||{fid:jt(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ot.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Rt(t),r=Mt(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:Dt,appId:t.appId,sdkVersion:Ct},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await Ft((()=>fetch(i,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Lt(t.authToken)}}throw await Pt("Create Installation",c)}(t,e);return Yt(t.appConfig,n)}catch(n){throw xt(n)&&409===n.customData.serverCode?await Zt(t.appConfig):await Yt(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ne(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return n.fid===Bt?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function ne(t){let e=await ie(t.appConfig);for(;1===e.registrationStatus;)await Vt(100),e=await ie(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await ee(t);return n||e}return e}function ie(t){return te(t,(t=>{if(!t)throw Ot.create("installation-not-found");return re(t)}))}function re(t){return 1===(e=t).registrationStatus&&e.registrationTime+At<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function se({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${Rt(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=Mt(t);return n.append("Authorization",function(t){return`${Dt} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:Ct,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await Ft((()=>fetch(i,a)));if(c.ok)return Lt(await c.json());throw await Pt("Generate Auth Token",c)}async function oe(t,e=!1){let n;const i=await te(t.appConfig,(i=>{if(!ce(i))throw Ot.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+kt}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await ae(t.appConfig);for(;1===n.authToken.requestStatus;)await Vt(100),n=await ae(t.appConfig);const i=n.authToken;return 0===i.requestStatus?oe(t,e):i}(t,e),i;{if(!navigator.onLine)throw Ot.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await se(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Yt(t.appConfig,i),n}catch(n){if(!xt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yt(t.appConfig,n)}else await Zt(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function ae(t){return te(t,(t=>{if(!ce(t))throw Ot.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+At<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function ce(t){return void 0!==t&&2===t.registrationStatus}function le(t){return Ot.create("missing-app-config-values",{valueName:t})}const ue="installations";ot(new I(ue,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw le("App Configuration");if(!t.name)throw le("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw le(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:at(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ot(new I("installations-internal",(t=>{const e=at(t.getProvider("app").getImmediate(),ue).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await ee(e);return i?i.catch(console.error):oe(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await ee(t);e&&await e}(n),(await oe(n,e)).token}(e,t)}}),"PRIVATE")),dt(St,_t),dt(St,_t,"esm2017");const he="analytics",de="firebase_id",fe="origin",pe=6e4,ge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",me="https://www.googletagmanager.com/gtag/js",ye=new x("@firebase/analytics"),ve=new d("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function we(t){if(!t.startsWith(me)){const e=ve.create("invalid-gtag-resource",{gtagURL:t});return ye.warn(e.message),""}return t}function be(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const Ee=30,Ie=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Te(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Se(t,e=Ie,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw ve.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw ve.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ae;return setTimeout((async()=>{a.abort()}),void 0!==n?n:pe),_e({appId:i,apiKey:r,measurementId:s},o,a,e)}async function _e(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Ie){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(ve.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(a)return ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Te(i)},s=ge.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw ve.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(e){const c=e;if(!function(t){if(!(t instanceof h&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(r.deleteThrottleMetadata(o),a)return ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw e}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?b(n,r.intervalMillis,Ee):b(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,u),ye.debug(`Calling attemptFetch again in ${l} millis`),_e(t,u,i,r)}}class Ae{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let Ce,De;async function Ne(t,e,n,i,r,s,o){var a;const c=Se(t);c.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>ye.error(t))),e.push(c);const h=async function(){if(!l())return ye.warn(ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await u()}catch(t){return ye.warn(ve.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[d,f]=await Promise.all([c,h]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(me)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:we}),i=document.createElement("script"),r=`${me}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,d.measurementId),De&&(r("consent","default",De),De=void 0),r("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p[fe]="firebase",p.update=!0,null!=f&&(p[de]=f),r("config",d.measurementId,p),Ce&&(r("set",Ce),Ce=void 0),d.measurementId}class ke{constructor(t){this.app=t}_delete(){return delete Oe[this.app.options.appId],Promise.resolve()}}let Oe={},xe=[];const Re={};let Le,Pe,Me="dataLayer",Fe=!1;function Ve(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=ve.create("invalid-analytics-context",{errorInfo:e});ye.warn(n.message)}}();const i=t.options.appId;if(!i)throw ve.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ve.create("no-api-key");ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Oe[i])throw ve.create("already-exists",{id:i});if(!Fe){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Me);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(t,e,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await be(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){ye.error(t)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await be(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){ye.error(t)}t("config",r,s)}(t,e,n,i,r,o)}else if("consent"===r){const[e]=s;t("consent","update",e)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(t){ye.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(Oe,xe,Re,Me,"gtag");Pe=t,Le=e,Fe=!0}return Oe[i]=Ne(t,xe,Re,e,Le,Me,n),new ke(t)}const Ue="@firebase/analytics",Be="0.10.1";ot(new I(he,((t,{options:e})=>Ve(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),ot(new I("analytics-internal",(function(t){try{const e=t.getProvider(he).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=E(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Pe,Oe[t.app.options.appId],e,n,i).catch((t=>ye.error(t)))}(e,t,n,i)}}catch(t){throw ve.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),dt(Ue,Be),dt(Ue,Be,"esm2017");var je,$e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qe={},ze=ze||{},Ke=$e||self;function He(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ge(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qe="closure_uid_"+(1e9*Math.random()>>>0),We=0;function Xe(t,e,n){return t.call.apply(t.bind,arguments)}function Je(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ye(t,e,n){return(Ye=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xe:Je).apply(null,arguments)}function Ze(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function tn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function en(){this.s=this.s,this.o=this.o}en.prototype.s=!1,en.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Qe)&&t[Qe]||(t[Qe]=++We))},en.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function rn(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function sn(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(He(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function on(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}on.prototype.h=function(){this.defaultPrevented=!0};var an=function(){if(!Ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Ke.addEventListener("test",t,e),Ke.removeEventListener("test",t,e)}catch(t){}return t}();function cn(t){return/^[\s\xa0]*$/.test(t)}function ln(){var t=Ke.navigator;return t&&(t=t.userAgent)?t:""}function un(t){return-1!=ln().indexOf(t)}function hn(t){return hn[" "](t),t}hn[" "]=function(){};var dn,fn,pn,gn=un("Opera"),mn=un("Trident")||un("MSIE"),yn=un("Edge"),vn=yn||mn,wn=un("Gecko")&&!(-1!=ln().toLowerCase().indexOf("webkit")&&!un("Edge"))&&!(un("Trident")||un("MSIE"))&&!un("Edge"),bn=-1!=ln().toLowerCase().indexOf("webkit")&&!un("Edge");function En(){var t=Ke.document;return t?t.documentMode:void 0}t:{var In="",Tn=(fn=ln(),wn?/rv:([^\);]+)(\)|;)/.exec(fn):yn?/Edge\/([\d\.]+)/.exec(fn):mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fn):bn?/WebKit\/(\S+)/.exec(fn):gn?/(?:Version)[ \/]?(\S+)/.exec(fn):void 0);if(Tn&&(In=Tn?Tn[1]:""),mn){var Sn=En();if(null!=Sn&&Sn>parseFloat(In)){dn=String(Sn);break t}}dn=In}Ke.document&&mn?pn=En()||parseInt(dn,10)||void 0:pn=void 0;var _n=pn;function An(t,e){if(on.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wn){t:{try{hn(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Cn[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&An.$.h.call(this)}}tn(An,on);var Cn={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Dn="closure_listenable_"+(1e6*Math.random()|0),Nn=0;function kn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Nn,this.fa=this.ia=!1}function On(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xn(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Rn(t){const e={};for(const n in t)e[n]=t[n];return e}const Ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pn(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Ln.length;e++)n=Ln[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Mn(t){this.src=t,this.g={},this.h=0}function Fn(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=nn(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(On(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Vn(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Mn.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Vn(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new kn(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var Un="closure_lm_"+(1e6*Math.random()|0),Bn={};function jn(t,e,n,i,r){if(i&&i.once)return qn(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jn(t,e[s],n,i,r);return null}return n=Xn(n),t&&t[Dn]?t.O(e,n,Ge(i)?!!i.capture:!!i,r):$n(t,e,n,!1,i,r)}function $n(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Ge(r)?!!r.capture:!!r,a=Qn(t);if(a||(t[Un]=a=new Mn(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Gn;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)an||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Hn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function qn(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)qn(t,e[s],n,i,r);return null}return n=Xn(n),t&&t[Dn]?t.P(e,n,Ge(i)?!!i.capture:!!i,r):$n(t,e,n,!0,i,r)}function zn(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)zn(t,e[s],n,i,r);else i=Ge(i)?!!i.capture:!!i,n=Xn(n),t&&t[Dn]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Vn(s=t.g[e],n,i,r))&&(On(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Qn(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vn(e,n,i,r)),(n=-1<t?e[t]:null)&&Kn(n))}function Kn(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Dn])Fn(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Hn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Qn(e))?(Fn(n,t),0==n.h&&(n.src=null,e[Un]=null)):On(t)}}}function Hn(t){return t in Bn?Bn[t]:Bn[t]="on"+t}function Gn(t,e){if(t.fa)t=!0;else{e=new An(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Kn(t),t=n.call(i,e)}return t}function Qn(t){return(t=t[Un])instanceof Mn?t:null}var Wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xn(t){return"function"==typeof t?t:(t[Wn]||(t[Wn]=function(e){return t.handleEvent(e)}),t[Wn])}function Jn(){en.call(this),this.i=new Mn(this),this.S=this,this.J=null}function Yn(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new on(e,t);else if(e instanceof on)e.target=e.target||t;else{var r=e;Pn(e=new on(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Zn(o,i,!0,e)&&r}if(r=Zn(o=e.g=t,i,!0,e)&&r,r=Zn(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Zn(o=e.g=n[s],i,!1,e)&&r}function Zn(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Fn(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}tn(Jn,en),Jn.prototype[Dn]=!0,Jn.prototype.removeEventListener=function(t,e,n,i){zn(this,t,e,n,i)},Jn.prototype.N=function(){if(Jn.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)On(n[i]);delete e.g[t],e.h--}}this.J=null},Jn.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Jn.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var ti=Ke.JSON.stringify;function ei(){var t=ci;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ni=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new ii),(t=>t.reset()));class ii{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ri(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function si(t){Ke.setTimeout((()=>{throw t}),0)}let oi,ai=!1,ci=new class{constructor(){this.h=this.g=null}add(t,e){const n=ni.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},li=()=>{const t=Ke.Promise.resolve(void 0);oi=()=>{t.then(ui)}};var ui=()=>{for(var t;t=ei();){try{t.h.call(t.g)}catch(t){si(t)}var e=ni;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ai=!1};function hi(t,e){Jn.call(this),this.h=t||1,this.g=e||Ke,this.j=Ye(this.qb,this),this.l=Date.now()}function di(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function fi(t,e,n){if("function"==typeof t)n&&(t=Ye(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ye(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ke.setTimeout(t,e||0)}function pi(t){t.g=fi((()=>{t.g=null,t.i&&(t.i=!1,pi(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}tn(hi,Jn),(je=hi.prototype).ga=!1,je.T=null,je.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yn(this,"tick"),this.ga&&(di(this),this.start()))}},je.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},je.N=function(){hi.$.N.call(this),di(this),delete this.g};class gi extends en{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:pi(this)}N(){super.N(),this.g&&(Ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(t){en.call(this),this.h=t,this.g={}}tn(mi,en);var yi=[];function vi(t,e,n,i){Array.isArray(n)||(n&&(yi[0]=n.toString()),n=yi);for(var r=0;r<n.length;r++){var s=jn(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function wi(t){xn(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Kn(t)}),t),t.g={}}function bi(){this.g=!0}function Ei(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ti(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}mi.prototype.N=function(){mi.$.N.call(this),wi(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bi.prototype.Ea=function(){this.g=!1},bi.prototype.info=function(){};var Ii={},Ti=null;function Si(){return Ti=Ti||new Jn}function _i(t){on.call(this,Ii.Ta,t)}function Ai(t){const e=Si();Yn(e,new _i(e))}function Ci(t,e){on.call(this,Ii.STAT_EVENT,t),this.stat=e}function Di(t){const e=Si();Yn(e,new Ci(e,t))}function Ni(t,e){on.call(this,Ii.Ua,t),this.size=e}function ki(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ke.setTimeout((function(){t()}),e)}Ii.Ta="serverreachability",tn(_i,on),Ii.STAT_EVENT="statevent",tn(Ci,on),Ii.Ua="timingevent",tn(Ni,on);var Oi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ri(){}function Li(t){return t.h||(t.h=t.i())}function Pi(){}Ri.prototype.h=null;var Mi,Fi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vi(){on.call(this,"d")}function Ui(){on.call(this,"c")}function Bi(){}function ji(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new mi(this),this.P=qi,t=vn?125:void 0,this.V=new hi(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}tn(Vi,on),tn(Ui,on),tn(Bi,Ri),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},Mi=new Bi;var qi=45e3,zi={},Ki={};function Hi(t,e,n){t.L=1,t.A=hr(or(e)),t.u=n,t.S=!0,Gi(t,null)}function Gi(t,e){t.G=Date.now(),Ji(t),t.B=or(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),Sr(n.i,"t",i),t.o=0,n=t.l.J,t.h=new $i,t.g=Ss(t.l,n?e:null,!t.u),0<t.O&&(t.M=new gi(Ye(t.Pa,t,t.g),t.O)),vi(t.U,t.g,"readystatechange",t.nb),e=t.I?Rn(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ai(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Qi(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Wi(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Xi(t,n),i==Ki){4==e&&(t.s=4,Di(14),r=!1),Ei(t.j,t.m,null,"[Incomplete Response]");break}if(i==zi){t.s=4,Di(15),Ei(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ei(t.j,t.m,i,null),nr(t,i)}Qi(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Di(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ms(e),e.M=!0,Di(11))):(Ei(t.j,t.m,n,"[Invalid Chunked Response]"),er(t),tr(t))}function Xi(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Ki:(n=Number(e.substring(n,i)),isNaN(n)?zi:(i+=1)+n>e.length?Ki:(e=e.slice(i,i+n),t.o=i+n,e))}function Ji(t){t.Y=Date.now()+t.P,Yi(t,t.P)}function Yi(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=ki(Ye(t.lb,t),e)}function Zi(t){t.C&&(Ke.clearTimeout(t.C),t.C=null)}function tr(t){0==t.l.H||t.J||ws(t.l,t)}function er(t){Zi(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,di(t.V),wi(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function nr(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Or(n.i,t)))if(!t.K&&Or(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;vs(n),cs(n)}gs(n),Di(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=ki(Ye(n.ib,n),6e3));if(1>=kr(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Es(n,11)}else if((t.K||n.g==t)&&vs(n),!cn(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(xr(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,ur(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=Ts(i,i.J?i.pa:null,i.Y),o.K){Rr(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Zi(a),Ji(a)),i.g=o}else ps(i);0<n.j.length&&us(n)}else"stop"!=l[0]&&"close"!=l[0]||Es(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Es(n,7):as(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Ai()}catch(t){}}function ir(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(He(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(He(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(He(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(je=ji.prototype).setTimeout=function(t){this.P=t},je.nb=function(t){t=t.target;const e=this.M;e&&3==es(t)?e.l():this.Pa(t)},je.Pa=function(t){try{if(t==this.g)t:{const u=es(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||vn||this.g&&(this.h.h||this.g.ja()||ns(this.g)))){this.J||4!=u||7==e||Ai(),Zi(this);var n=this.g.da();this.ca=n;e:if(Qi(this)){var i=ns(this.g);t="";var r=i.length,s=4==es(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){er(this),tr(this);var o="";break e}this.h.i=new Ke.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cn(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,Di(12),er(this),tr(this);break t}Ei(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nr(this,n)}this.S?(Wi(this,u,o),vn&&this.i&&3==u&&(vi(this.U,this.V,"tick",this.mb),this.V.start())):(Ei(this.j,this.m,o,null),nr(this,o)),4==u&&er(this),this.i&&!this.J&&(4==u?ws(this.l,this):(this.i=!1,Ji(this)))}else(function(t){const e={};t=(t.g&&2<=es(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(cn(t[i]))continue;var n=ri(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Di(12)):(this.s=0,Di(13)),er(this),tr(this)}}}catch(t){}},je.mb=function(){if(this.g){var t=es(this.g),e=this.g.ja();this.o<e.length&&(Zi(this),Wi(this,t,e),this.i&&4!=t&&Ji(this))}},je.cancel=function(){this.J=!0,er(this)},je.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(Ai(),Di(17)),er(this),this.s=2,tr(this)):Yi(this,this.Y-t)};var rr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof sr){this.h=t.h,ar(this,t.j),this.s=t.s,this.g=t.g,cr(this,t.m),this.l=t.l;var e=t.i,n=new br;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),lr(this,n),this.o=t.o}else t&&(e=String(t).match(rr))?(this.h=!1,ar(this,e[1]||"",!0),this.s=dr(e[2]||""),this.g=dr(e[3]||"",!0),cr(this,e[4]),this.l=dr(e[5]||"",!0),lr(this,e[6]||"",!0),this.o=dr(e[7]||"")):(this.h=!1,this.i=new br(null,this.h))}function or(t){return new sr(t)}function ar(t,e,n){t.j=n?dr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lr(t,e,n){e instanceof br?(t.i=e,function(t,e){e&&!t.j&&(Er(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ir(this,e),Sr(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=fr(e,vr)),t.i=new br(e,t.h))}function ur(t,e,n){t.i.set(e,n)}function hr(t){return ur(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function dr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,pr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fr(e,gr,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(fr(e,gr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fr(n,"/"==n.charAt(0)?yr:mr,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",fr(n,wr)),t.join("")};var gr=/[#\/\?@]/g,mr=/[#\?:]/g,yr=/[#\?]/g,vr=/[#\?@]/g,wr=/#/g;function br(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Er(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ir(t,e){Er(t),e=_r(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Tr(t,e){return Er(t),e=_r(t,e),t.g.has(e)}function Sr(t,e,n){Ir(t,e),0<n.length&&(t.i=null,t.g.set(_r(t,e),rn(n)),t.h+=n.length)}function _r(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(je=br.prototype).add=function(t,e){Er(this),this.i=null,t=_r(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},je.forEach=function(t,e){Er(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},je.ta=function(){Er(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},je.Z=function(t){Er(this);let e=[];if("string"==typeof t)Tr(this,t)&&(e=e.concat(this.g.get(_r(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},je.set=function(t,e){return Er(this),this.i=null,Tr(this,t=_r(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},je.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},je.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var Ar=class{constructor(t,e){this.g=t,this.map=e}};function Cr(t){this.l=t||Dr,t=Ke.PerformanceNavigationTiming?0<(t=Ke.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ke.g&&Ke.g.Ka&&Ke.g.Ka()&&Ke.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dr=10;function Nr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function kr(t){return t.h?1:t.g?t.g.size:0}function Or(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xr(t,e){t.g?t.g.add(e):t.h=e}function Rr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Lr(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return rn(t.i)}Cr.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Pr=class{stringify(t){return Ke.JSON.stringify(t,void 0)}parse(t){return Ke.JSON.parse(t,void 0)}};function Mr(){this.g=new Pr}function Fr(t,e,n){const i=n||"";try{ir(t,(function(t,n){let r=t;Ge(t)&&(r=ti(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Vr(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ur(t){this.l=t.ec||null,this.j=t.ob||!1}function Br(t,e){Jn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=jr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tn(Ur,Ri),Ur.prototype.g=function(){return new Br(this.l,this.j)},Ur.prototype.i=function(t){return function(){return t}}({}),tn(Br,Jn);var jr=0;function $r(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function qr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zr(t)}function zr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(je=Br.prototype).open=function(t,e){if(this.readyState!=jr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zr(this)},je.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ke).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qr(this)),this.readyState=jr},je.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ke.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$r(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},je.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qr(this):zr(this),3==this.readyState&&$r(this)}},je.Za=function(t){this.g&&(this.response=this.responseText=t,qr(this))},je.Ya=function(t){this.g&&(this.response=t,qr(this))},je.ka=function(){this.g&&qr(this)},je.setRequestHeader=function(t,e){this.v.append(t,e)},je.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},je.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Br.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Kr=Ke.JSON.parse;function Hr(t){Jn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Gr,this.L=this.M=!1}tn(Hr,Jn);var Gr="",Qr=/^https?$/i,Wr=["POST","PUT"];function Xr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Jr(t),Zr(t)}function Jr(t){t.F||(t.F=!0,Yn(t,"complete"),Yn(t,"error"))}function Yr(t){if(t.h&&void 0!==ze&&(!t.C[1]||4!=es(t)||2!=t.da()))if(t.v&&4==es(t))fi(t.La,0,t);else if(Yn(t,"readystatechange"),4==es(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(rr)[1]||null;!r&&Ke.self&&Ke.self.location&&(r=Ke.self.location.protocol.slice(0,-1)),i=!Qr.test(r?r.toLowerCase():"")}n=i}if(n)Yn(t,"complete"),Yn(t,"success");else{t.m=6;try{var s=2<es(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Jr(t)}}finally{Zr(t)}}}function Zr(t,e){if(t.g){ts(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Yn(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function ts(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ke.clearTimeout(t.A),t.A=null)}function es(t){return t.g?t.g.readyState:0}function ns(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Gr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function is(t){let e="";return xn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function rs(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=is(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ur(t,e,n))}function ss(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function os(t){this.Ga=0,this.j=[],this.l=new bi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ss("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ss("baseRetryDelayMs",5e3,t),this.hb=ss("retryDelaySeedMs",1e4,t),this.eb=ss("forwardChannelMaxRetries",2,t),this.xa=ss("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Cr(t&&t.concurrentRequestLimit),this.Ja=new Mr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function as(t){if(ls(t),3==t.H){var e=t.W++,n=or(t.I);if(ur(n,"SID",t.K),ur(n,"RID",e),ur(n,"TYPE","terminate"),ds(t,n),(e=new ji(t,t.l,e)).L=2,e.A=hr(or(n)),n=!1,Ke.navigator&&Ke.navigator.sendBeacon)try{n=Ke.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Ke.Image&&((new Image).src=e.A,n=!0),n||(e.g=Ss(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ji(e)}Is(t)}function cs(t){t.g&&(ms(t),t.g.cancel(),t.g=null)}function ls(t){cs(t),t.u&&(Ke.clearTimeout(t.u),t.u=null),vs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ke.clearTimeout(t.m),t.m=null)}function us(t){if(!Nr(t.i)&&!t.m){t.m=!0;var e=t.Na;oi||li(),ai||(oi(),ai=!0),ci.add(e,t),t.C=0}}function hs(t,e){var n;n=e?e.m:t.W++;const i=or(t.I);ur(i,"SID",t.K),ur(i,"RID",n),ur(i,"AID",t.V),ds(t,i),t.o&&t.s&&rs(i,t.o,t.s),n=new ji(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=fs(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),xr(t.i,n),Hi(n,i,e)}function ds(t,e){t.na&&xn(t.na,(function(t,n){ur(e,n,t)})),t.h&&ir({},(function(t,n){ur(e,n,t)}))}function fs(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ye(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Fr(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function ps(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;oi||li(),ai||(oi(),ai=!0),ci.add(e,t),t.A=0}}function gs(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=ki(Ye(t.Ma,t),bs(t,t.A)),t.A++,0))}function ms(t){null!=t.B&&(Ke.clearTimeout(t.B),t.B=null)}function ys(t){t.g=new ji(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=or(t.wa);ur(e,"RID","rpc"),ur(e,"SID",t.K),ur(e,"AID",t.V),ur(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ur(e,"TO",t.qa),ur(e,"TYPE","xmlhttp"),ds(t,e),t.o&&t.s&&rs(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=hr(or(e)),n.u=null,n.S=!0,Gi(n,t)}function vs(t){null!=t.v&&(Ke.clearTimeout(t.v),t.v=null)}function ws(t,e){var n=null;if(t.g==e){vs(t),ms(t),t.g=null;var i=2}else{if(!Or(t.i,e))return;n=e.F,Rr(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Yn(i=Si(),new Ni(i,n)),us(t)}else ps(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(kr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=ki(Ye(t.Na,t,e),bs(t,t.C)),t.C++,0)))}(t,e)||2==i&&gs(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Es(t,5);break;case 4:Es(t,10);break;case 3:Es(t,6);break;default:Es(t,2)}}function bs(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Es(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=Ye(t.pb,t);n||(n=new sr("//www.google.com/images/cleardot.gif"),Ke.location&&"http"==Ke.location.protocol||ar(n,"https"),hr(n)),function(t,e){const n=new bi;if(Ke.Image){const i=new Image;i.onload=Ze(Vr,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ze(Vr,n,i,"TestLoadImage: error",!1,e),i.onabort=Ze(Vr,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ze(Vr,n,i,"TestLoadImage: timeout",!1,e),Ke.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Di(2);t.H=0,t.h&&t.h.za(e),Is(t),ls(t)}function Is(t){if(t.H=0,t.ma=[],t.h){const e=Lr(t.i);0==e.length&&0==t.j.length||(sn(t.ma,e),sn(t.ma,t.j),t.i.i.length=0,rn(t.j),t.j.length=0),t.h.ya()}}function Ts(t,e,n){var i=n instanceof sr?or(n):new sr(n);if(""!=i.g)e&&(i.g=e+"."+i.g),cr(i,i.m);else{var r=Ke.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new sr(null);i&&ar(s,i),e&&(s.g=e),r&&cr(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ur(i,n,e),ur(i,"VER",t.ra),ds(t,i),i}function Ss(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Hr(new Ur({ob:n})):new Hr(t.va)).Oa(t.J),e}function _s(){}function As(){if(mn&&!(10<=Number(_n)))throw Error("Environmental error: no available transport.")}function Cs(t,e){Jn.call(this),this.g=new os(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!cn(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cn(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ks(this)}function Ds(t){Vi.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ns(){Ui.call(this),this.status=1}function ks(t){this.g=t}function Os(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xs(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Rs(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(je=Hr.prototype).Oa=function(t){this.M=t},je.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Mi.g(),this.C=this.u?Li(this.u):Li(Mi),this.g.onreadystatechange=Ye(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Xr(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Ke.FormData&&t instanceof Ke.FormData,!(0<=nn(Wr,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ts(this),0<this.B&&((this.L=function(t){return mn&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.ua,this)):this.A=fi(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Xr(this,t)}},je.ua=function(){void 0!==ze&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yn(this,"timeout"),this.abort(8))},je.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yn(this,"complete"),Yn(this,"abort"),Zr(this))},je.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zr(this,!0)),Hr.$.N.call(this)},je.La=function(){this.s||(this.G||this.v||this.l?Yr(this):this.kb())},je.kb=function(){Yr(this)},je.isActive=function(){return!!this.g},je.da=function(){try{return 2<es(this)?this.g.status:-1}catch(t){return-1}},je.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},je.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Kr(e)}},je.Ia=function(){return this.m},je.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(je=os.prototype).ra=8,je.H=1,je.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ji(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Rn(s),Pn(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=fs(this,r,e),ur(n=or(this.I),"RID",t),ur(n,"CVER",22),this.F&&ur(n,"X-HTTP-Session-Id",this.F),ds(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(is(s)))+"&"+e:this.o&&rs(n,this.o,s)),xr(this.i,r),this.bb&&ur(n,"TYPE","init"),this.P?(ur(n,"$req",e),ur(n,"SID","null"),r.aa=!0,Hi(r,n,null)):Hi(r,n,e),this.H=2}}else 3==this.H&&(t?hs(this,t):0==this.j.length||Nr(this.i)||hs(this))},je.Ma=function(){if(this.u=null,ys(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ki(Ye(this.jb,this),t)}},je.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Di(10),cs(this),ys(this))},je.ib=function(){null!=this.v&&(this.v=null,cs(this),gs(this),Di(19))},je.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Di(2)):(this.l.info("Failed to ping google.com"),Di(1))},je.isActive=function(){return!!this.h&&this.h.isActive(this)},(je=_s.prototype).Ba=function(){},je.Aa=function(){},je.za=function(){},je.ya=function(){},je.isActive=function(){return!0},je.Va=function(){},As.prototype.g=function(t,e){return new Cs(t,e)},tn(Cs,Jn),Cs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Di(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ts(t,null,t.Y),us(t)},Cs.prototype.close=function(){as(this.g)},Cs.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=ti(t),t=n);e.j.push(new Ar(e.fb++,t)),3==e.H&&us(e)},Cs.prototype.N=function(){this.g.h=null,delete this.j,as(this.g),delete this.g,Cs.$.N.call(this)},tn(Ds,Vi),tn(Ns,Ui),tn(ks,_s),ks.prototype.Ba=function(){Yn(this.g,"a")},ks.prototype.Aa=function(t){Yn(this.g,new Ds(t))},ks.prototype.za=function(t){Yn(this.g,new Ns)},ks.prototype.ya=function(){Yn(this.g,"b")},tn(Os,(function(){this.blockSize=-1})),Os.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Os.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)xs(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){xs(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){xs(this,i),r=0;break}}this.h=r,this.i+=e},Os.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Ls={};function Ps(t){return-128<=t&&128>t?function(t,e){var n=Ls;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new Rs([0|t],0>t?-1:0)}(t)}(t):new Rs([0|t],0>t?-1:0)}function Ms(t){if(isNaN(t)||!isFinite(t))return Vs;if(0>t)return qs(Ms(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Fs;return new Rs(e,0)}var Fs=4294967296,Vs=Ps(0),Us=Ps(1),Bs=Ps(16777216);function js(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function $s(t){return-1==t.h}function qs(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Rs(n,~t.h).add(Us)}function zs(t,e){return t.add(qs(e))}function Ks(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Hs(t,e){this.g=t,this.h=e}function Gs(t,e){if(js(e))throw Error("division by zero");if(js(t))return new Hs(Vs,Vs);if($s(t))return e=Gs(qs(t),e),new Hs(qs(e.g),qs(e.h));if($s(e))return e=Gs(t,qs(e)),new Hs(qs(e.g),e.h);if(30<t.g.length){if($s(t)||$s(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Us,i=e;0>=i.X(t);)n=Qs(n),i=Qs(i);var r=Ws(n,1),s=Ws(i,1);for(i=Ws(i,2),n=Ws(n,2);!js(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ws(i,1),n=Ws(n,1)}return e=zs(t,r.R(e)),new Hs(r,e)}for(r=Vs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ms(n)).R(e);$s(o)||0<o.X(t);)o=(s=Ms(n-=i)).R(e);js(s)&&(s=Us),r=r.add(s),t=zs(t,o)}return new Hs(r,t)}function Qs(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Rs(n,t.h)}function Ws(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Rs(r,t.h)}(je=Rs.prototype).ea=function(){if($s(this))return-qs(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Fs+i)*e,e*=Fs}return t},je.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(js(this))return"0";if($s(this))return"-"+qs(this).toString(t);for(var e=Ms(Math.pow(t,6)),n=this,i="";;){var r=Gs(n,e).g,s=((0<(n=zs(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(js(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},je.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},je.X=function(t){return $s(t=zs(this,t))?-1:js(t)?0:1},je.abs=function(){return $s(this)?qs(this):this},je.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Rs(n,-2147483648&n[n.length-1]?-1:0)},je.R=function(t){if(js(this)||js(t))return Vs;if($s(this))return $s(t)?qs(this).R(qs(t)):qs(qs(this).R(t));if($s(t))return qs(this.R(qs(t)));if(0>this.X(Bs)&&0>t.X(Bs))return Ms(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Ks(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Ks(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Ks(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Ks(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Rs(n,0)},je.gb=function(t){return Gs(this,t).h},je.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Rs(n,this.h&t.h)},je.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Rs(n,this.h|t.h)},je.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Rs(n,this.h^t.h)},As.prototype.createWebChannel=As.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,xi.COMPLETE="complete",Pi.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",Jn.prototype.listen=Jn.prototype.O,Hr.prototype.listenOnce=Hr.prototype.P,Hr.prototype.getLastError=Hr.prototype.Sa,Hr.prototype.getLastErrorCode=Hr.prototype.Ia,Hr.prototype.getStatus=Hr.prototype.da,Hr.prototype.getResponseJson=Hr.prototype.Wa,Hr.prototype.getResponseText=Hr.prototype.ja,Hr.prototype.send=Hr.prototype.ha,Hr.prototype.setWithCredentials=Hr.prototype.Oa,Os.prototype.digest=Os.prototype.l,Os.prototype.reset=Os.prototype.reset,Os.prototype.update=Os.prototype.j,Rs.prototype.add=Rs.prototype.add,Rs.prototype.multiply=Rs.prototype.R,Rs.prototype.modulo=Rs.prototype.gb,Rs.prototype.compare=Rs.prototype.X,Rs.prototype.toNumber=Rs.prototype.ea,Rs.prototype.toString=Rs.prototype.toString,Rs.prototype.getBits=Rs.prototype.D,Rs.fromNumber=Ms,Rs.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return qs(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Ms(Math.pow(n,8)),r=Vs,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Ms(Math.pow(n,o)),r=r.R(o).add(Ms(a))):r=(r=r.R(i)).add(Ms(a))}return r};var Xs=qe.createWebChannelTransport=function(){return new As},Js=qe.getStatEventTarget=function(){return Si()},Ys=qe.ErrorCode=Oi,Zs=qe.EventType=xi,to=qe.Event=Ii,eo=qe.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},no=(qe.FetchXmlHttpFactory=Ur,qe.WebChannel=Pi),io=qe.XhrIo=Hr,ro=(qe.Md5=Os,qe.Integer=Rs);const so="@firebase/firestore";class oo{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oo.UNAUTHENTICATED=new oo(null),oo.GOOGLE_CREDENTIALS=new oo("google-credentials-uid"),oo.FIRST_PARTY=new oo("first-party-uid"),oo.MOCK_USER=new oo("mock-user");let ao="10.8.0";const co=new x("@firebase/firestore");function lo(){return co.logLevel}function uo(t,...e){if(co.logLevel<=C.DEBUG){const n=e.map(po);co.debug(`Firestore (${ao}): ${t}`,...n)}}function ho(t,...e){if(co.logLevel<=C.ERROR){const n=e.map(po);co.error(`Firestore (${ao}): ${t}`,...n)}}function fo(t,...e){if(co.logLevel<=C.WARN){const n=e.map(po);co.warn(`Firestore (${ao}): ${t}`,...n)}}function po(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function go(t="Unexpected state"){const e=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: `+t;throw ho(e),new Error(e)}function mo(t,e){t||go()}function yo(t,e){return t}const vo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wo extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bo{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Eo{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Io{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(oo.UNAUTHENTICATED)))}shutdown(){}}class To{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class So{constructor(t){this.t=t,this.currentUser=oo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new bo,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{uo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(uo("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new bo)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(uo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(mo("string"==typeof e.accessToken),new Eo(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return mo(null===t||"string"==typeof t),new oo(t)}}class _o{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=oo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ao{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new _o(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(oo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Co{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Do{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&uo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,uo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{uo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):uo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(mo("string"==typeof t.token),this.R=t.token,new Co(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function No(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ko{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=No(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Oo(t,e){return t<e?-1:t>e?1:0}function xo(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Ro{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new wo(vo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new wo(vo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new wo(vo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wo(vo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ro.fromMillis(Date.now())}static fromDate(t){return Ro.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Ro(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Oo(this.nanoseconds,t.nanoseconds):Oo(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lo{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Lo(t)}static min(){return new Lo(new Ro(0,0))}static max(){return new Lo(new Ro(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Po{constructor(t,e,n){void 0===e?e=0:e>t.length&&go(),void 0===n?n=t.length-e:n>t.length-e&&go(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Po.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Po?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Mo extends Po{construct(t,e,n){return new Mo(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new wo(vo.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Mo(e)}static emptyPath(){return new Mo([])}}const Fo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vo extends Po{construct(t,e,n){return new Vo(t,e,n)}static isValidIdentifier(t){return Fo.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vo.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vo(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new wo(vo.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new wo(vo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new wo(vo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new wo(vo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vo(e)}static emptyPath(){return new Vo([])}}class Uo{constructor(t){this.path=t}static fromPath(t){return new Uo(Mo.fromString(t))}static fromName(t){return new Uo(Mo.fromString(t).popFirst(5))}static empty(){return new Uo(Mo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Mo.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Mo.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Uo(new Mo(t.slice()))}}function Bo(t){return new jo(t.readTime,t.key,-1)}class jo{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new jo(Lo.min(),Uo.empty(),-1)}static max(){return new jo(Lo.max(),Uo.empty(),-1)}}function $o(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Uo.comparator(t.documentKey,e.documentKey),0!==n?n:Oo(t.largestBatchId,e.largestBatchId))}const qo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ko(t){if(t.code!==vo.FAILED_PRECONDITION||t.message!==qo)throw t;uo("LocalStore","Unexpectedly lost primary lease")}class Ho{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&go(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ho(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ho?e:Ho.resolve(e)}catch(t){return Ho.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ho.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ho.reject(e)}static resolve(t){return new Ho(((e,n)=>{e(t)}))}static reject(t){return new Ho(((e,n)=>{n(t)}))}static waitFor(t){return new Ho(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Ho.resolve(!1);for(const n of t)e=e.next((t=>t?Ho.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Ho(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Ho(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class Go{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new bo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Xo(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=ea(e.target.error);this.V.reject(new Xo(t,n))}}static open(t,e,n,i){try{return new Go(e,t.transaction(i,n))}catch(t){throw new Xo(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(uo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Yo(e)}}class Qo{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Qo.S(c())&&ho("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return uo("SimpleDb","Removing database:",t),Zo(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!l())return!1;if(Qo.C())return!0;const t=c(),e=Qo.S(t),n=0<e&&e<10,i=Qo.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(uo("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Xo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new wo(vo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new wo(vo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Xo(t,i))},i.onupgradeneeded=t=>{uo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{uo("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Go.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Ho.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(uo("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Wo{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Zo(this.k.delete())}}class Xo extends wo{constructor(t,e){super(vo.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Jo(t){return"IndexedDbTransactionError"===t.name}class Yo{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(uo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(uo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zo(n)}add(t){return uo("SimpleDb","ADD",this.store.name,t,t),Zo(this.store.add(t))}get(t){return Zo(this.store.get(t)).next((e=>(void 0===e&&(e=null),uo("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return uo("SimpleDb","DELETE",this.store.name,t),Zo(this.store.delete(t))}count(){return uo("SimpleDb","COUNT",this.store.name),Zo(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Ho(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Ho(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){uo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Ho(((n,i)=>{e.onerror=t=>{const e=ea(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Ho(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Wo(r),o=e(r.primaryKey,r.value,s);if(o instanceof Ho){const t=o.catch((t=>(s.done(),Ho.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Ho.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Zo(t){return new Ho(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=ea(t.target.error);n(e)}}))}let ta=!1;function ea(t){const e=Qo.S(c());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new wo("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ta||(ta=!0,setTimeout((()=>{throw t}),0)),t}}return t}class na{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function ia(t){return null==t}function ra(t){return 0===t&&1/t==-1/0}na._e=-1;function sa(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aa(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ca{constructor(t,e){this.comparator=t,this.root=e||ua.EMPTY}insert(t,e){return new ca(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ua.BLACK,null,null))}remove(t){return new ca(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ua.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new la(this.root,t,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new la(this.root,t,this.comparator,!0)}}class la{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ua{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:ua.RED,this.left=null!=i?i:ua.EMPTY,this.right=null!=r?r:ua.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new ua(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ua.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ua.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw go();if(this.right.isRed())throw go();const t=this.left.check();if(t!==this.right.check())throw go();return t+(this.isRed()?0:1)}}ua.EMPTY=null,ua.RED=!0,ua.BLACK=!1,ua.EMPTY=new class{constructor(){this.size=0}get key(){throw go()}get value(){throw go()}get color(){throw go()}get left(){throw go()}get right(){throw go()}copy(t,e,n,i,r){return this}insert(t,e,n){return new ua(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ha{constructor(t){this.comparator=t,this.data=new ca(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new da(this.data.getIterator())}getIteratorFrom(t){return new da(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ha))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ha(this.comparator);return e.data=t,e}}class da{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fa{constructor(t){this.fields=t,t.sort(Vo.comparator)}static empty(){return new fa([])}unionWith(t){let e=new ha(Vo.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new fa(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return xo(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class pa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ga{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new pa("Invalid base64 string: "+t):t}}(t);return new ga(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ga(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Oo(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ga.EMPTY_BYTE_STRING=new ga("");const ma=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(t){if(mo(!!t),"string"==typeof t){let e=0;const n=ma.exec(t);if(mo(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:va(t.seconds),nanos:va(t.nanos)}}function va(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wa(t){return"string"==typeof t?ga.fromBase64String(t):ga.fromUint8Array(t)}function ba(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ea(t){const e=t.mapValue.fields.__previous_value__;return ba(e)?Ea(e):e}function Ia(t){const e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new Ro(e.seconds,e.nanos)}class Ta{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Sa{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Sa&&t.projectId===this.projectId&&t.database===this.database}}const _a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ba(t)?4:Fa(t)?9007199254740991:10:go()}function Ca(t,e){if(t===e)return!0;const n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ia(t).isEqual(Ia(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ya(t.timestampValue),i=ya(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return wa(t.bytesValue).isEqual(wa(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return va(t.geoPointValue.latitude)===va(e.geoPointValue.latitude)&&va(t.geoPointValue.longitude)===va(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return va(t.integerValue)===va(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=va(t.doubleValue),i=va(e.doubleValue);return n===i?ra(n)===ra(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return xo(t.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(sa(n)!==sa(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ca(n[t],i[t])))return!1;return!0}(t,e);default:return go()}}function Da(t,e){return void 0!==(t.values||[]).find((t=>Ca(t,e)))}function Na(t,e){if(t===e)return 0;const n=Aa(t),i=Aa(e);if(n!==i)return Oo(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oo(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=va(t.integerValue||t.doubleValue),i=va(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ka(t.timestampValue,e.timestampValue);case 4:return ka(Ia(t),Ia(e));case 5:return Oo(t.stringValue,e.stringValue);case 6:return function(t,e){const n=wa(t),i=wa(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Oo(n[t],i[t]);if(0!==e)return e}return Oo(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Oo(va(t.latitude),va(e.latitude));return 0!==n?n:Oo(va(t.longitude),va(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Na(n[t],i[t]);if(e)return e}return Oo(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===_a.mapValue&&e===_a.mapValue)return 0;if(t===_a.mapValue)return 1;if(e===_a.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=Oo(i[t],s[t]);if(0!==e)return e;const o=Na(n[i[t]],r[s[t]]);if(0!==o)return o}return Oo(i.length,s.length)}(t.mapValue,e.mapValue);default:throw go()}}function ka(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Oo(t,e);const n=ya(t),i=ya(e),r=Oo(n.seconds,i.seconds);return 0!==r?r:Oo(n.nanos,i.nanos)}function Oa(t){return xa(t)}function xa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ya(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return wa(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Uo.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=xa(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${xa(t.fields[r])}`;return n+"}"}(t.mapValue):go()}function Ra(t){return!!t&&"integerValue"in t}function La(t){return!!t&&"arrayValue"in t}function Pa(t){return!!t&&"mapValue"in t}function Ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oa(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Ma(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fa(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Va{constructor(t){this.value=t}static empty(){return new Va({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Pa(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ma(e)}setAll(t){let e=Vo.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Ma(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Pa(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ca(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Pa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){oa(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Va(Ma(this.value))}}function Ua(t){const e=[];return oa(t.fields,((t,n)=>{const i=new Vo([t]);if(Pa(n)){const t=Ua(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new fa(e)}class Ba{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Ba(t,0,Lo.min(),Lo.min(),Lo.min(),Va.empty(),0)}static newFoundDocument(t,e,n,i){return new Ba(t,1,e,Lo.min(),n,i,0)}static newNoDocument(t,e){return new Ba(t,2,e,Lo.min(),Lo.min(),Va.empty(),0)}static newUnknownDocument(t,e){return new Ba(t,3,e,Lo.min(),Lo.min(),Va.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Lo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lo.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ba&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ba(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ja{constructor(t,e){this.position=t,this.inclusive=e}}function $a(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Uo.comparator(Uo.fromName(o.referenceValue),n.key):Na(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function qa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ca(t.position[n],e.position[n]))return!1;return!0}class za{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ka(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ha{}class Ga extends Ha{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new tc(t,e,n):"array-contains"===e?new rc(t,n):"in"===e?new sc(t,n):"not-in"===e?new oc(t,n):"array-contains-any"===e?new ac(t,n):new Ga(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ec(t,n):new nc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Na(e,this.value)):null!==e&&Aa(this.value)===Aa(e)&&this.matchesComparison(Na(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return go()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qa extends Ha{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Qa(t,e)}matches(t){return Wa(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Wa(t){return"and"===t.op}function Xa(t){return function(t){for(const e of t.filters)if(e instanceof Qa)return!1;return!0}(t)&&Wa(t)}function Ja(t){if(t instanceof Ga)return t.field.canonicalString()+t.op.toString()+Oa(t.value);if(Xa(t))return t.filters.map((t=>Ja(t))).join(",");{const e=t.filters.map((t=>Ja(t))).join(",");return`${t.op}(${e})`}}function Ya(t,e){return t instanceof Ga?function(t,e){return e instanceof Ga&&t.op===e.op&&t.field.isEqual(e.field)&&Ca(t.value,e.value)}(t,e):t instanceof Qa?function(t,e){return e instanceof Qa&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Ya(n,e.filters[i])),!0)}(t,e):void go()}function Za(t){return t instanceof Ga?function(t){return`${t.field.canonicalString()} ${t.op} ${Oa(t.value)}`}(t):t instanceof Qa?function(t){return t.op.toString()+" {"+t.getFilters().map(Za).join(" ,")+"}"}(t):"Filter"}class tc extends Ga{constructor(t,e,n){super(t,e,n),this.key=Uo.fromName(n.referenceValue)}matches(t){const e=Uo.comparator(t.key,this.key);return this.matchesComparison(e)}}class ec extends Ga{constructor(t,e){super(t,"in",e),this.keys=ic(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class nc extends Ga{constructor(t,e){super(t,"not-in",e),this.keys=ic(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function ic(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Uo.fromName(t.referenceValue)))}class rc extends Ga{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return La(e)&&Da(e.arrayValue,this.value)}}class sc extends Ga{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Da(this.value.arrayValue,e)}}class oc extends Ga{constructor(t,e){super(t,"not-in",e)}matches(t){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Da(this.value.arrayValue,e)}}class ac extends Ga{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!La(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Da(this.value.arrayValue,t)))}}class cc{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function lc(t,e=null,n=[],i=[],r=null,s=null,o=null){return new cc(t,e,n,i,r,s,o)}function uc(t){const e=yo(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ja(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ia(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Oa(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Oa(t))).join(",")),e.ce=t}return e.ce}function hc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ka(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ya(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qa(t.startAt,e.startAt)&&qa(t.endAt,e.endAt)}class dc{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function fc(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function pc(t){const e=yo(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new ha(Vo.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new za(i,n))})),t.has(Vo.keyField().canonicalString())||e.le.push(new za(Vo.keyField(),n))}return e.le}function gc(t){const e=yo(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return lc(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new za(t.field,e)}));const n=t.endAt?new ja(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ja(t.startAt.position,t.startAt.inclusive):null;return lc(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,pc(t))),e.he}function mc(t,e,n){return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yc(t,e){return hc(gc(t),gc(e))&&t.limitType===e.limitType}function vc(t){return`${uc(gc(t))}|lt:${t.limitType}`}function wc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Za(t))).join(", ")}]`),ia(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Oa(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Oa(t))).join(",")),`Target(${e})`}(gc(t))}; limitType=${t.limitType})`}function bc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Uo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of pc(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=$a(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,pc(t),e)||t.endAt&&!function(t,e,n){const i=$a(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,pc(t),e))}(t,e)}function Ec(t,e,n){const i=t.field.isKeyField()?Uo.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Na(i,r):go()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return go()}}class Ic{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){oa(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return aa(this.inner)}size(){return this.innerSize}}const Tc=new ca(Uo.comparator);function Sc(){return Tc}const _c=new ca(Uo.comparator);function Ac(...t){let e=_c;for(const n of t)e=e.insert(n.key,n);return e}function Cc(t){let e=_c;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Dc(){return kc()}function Nc(){return kc()}function kc(){return new Ic((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Oc=new ca(Uo.comparator),xc=new ha(Uo.comparator);function Rc(...t){let e=xc;for(const n of t)e=e.add(n);return e}const Lc=new ha(Oo);function Pc(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function Mc(t){return{integerValue:""+t}}function Fc(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Mc(e):Pc(t,e)}class Vc{constructor(){this._=void 0}}function Uc(t,e,n){return t instanceof $c?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ba(e)&&(e=Ea(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof qc?zc(t,e):t instanceof Kc?Hc(t,e):function(t,e){const n=jc(t,e),i=Qc(n)+Qc(t.Ie);return Ra(n)&&Ra(t.Ie)?Mc(i):Pc(t.serializer,i)}(t,e)}function Bc(t,e,n){return t instanceof qc?zc(t,e):t instanceof Kc?Hc(t,e):n}function jc(t,e){return t instanceof Gc?function(t){return Ra(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class $c extends Vc{}class qc extends Vc{constructor(t){super(),this.elements=t}}function zc(t,e){const n=Wc(e);for(const e of t.elements)n.some((t=>Ca(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Kc extends Vc{constructor(t){super(),this.elements=t}}function Hc(t,e){let n=Wc(e);for(const e of t.elements)n=n.filter((t=>!Ca(t,e)));return{arrayValue:{values:n}}}class Gc extends Vc{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Qc(t){return va(t.integerValue||t.doubleValue)}function Wc(t){return La(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Xc{constructor(t,e){this.version=t,this.transformResults=e}}class Jc{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Jc}static exists(t){return new Jc(void 0,t)}static updateTime(t){return new Jc(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Zc{}function tl(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ul(t.key,Jc.none()):new sl(t.key,t.data,Jc.none());{const n=t.data,i=Va.empty();let r=new ha(Vo.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new ol(t.key,i,new fa(r.toArray()),Jc.none())}}function el(t,e,n){t instanceof sl?function(t,e,n){const i=t.value.clone(),r=cl(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ol?function(t,e,n){if(!Yc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=cl(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(al(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function nl(t,e,n,i){return t instanceof sl?function(t,e,n,i){if(!Yc(t.precondition,e))return n;const r=t.value.clone(),s=ll(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof ol?function(t,e,n,i){if(!Yc(t.precondition,e))return n;const r=ll(t.fieldTransforms,i,e),s=e.data;return s.setAll(al(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Yc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function il(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=jc(i.transform,t||null);null!=r&&(null===n&&(n=Va.empty()),n.set(i.field,r))}return n||null}function rl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&xo(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof qc&&e instanceof qc||t instanceof Kc&&e instanceof Kc?xo(t.elements,e.elements,Ca):t instanceof Gc&&e instanceof Gc?Ca(t.Ie,e.Ie):t instanceof $c&&e instanceof $c}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Zc{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ol extends Zc{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function al(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function cl(t,e,n){const i=new Map;mo(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Bc(o,a,n[r]))}return i}function ll(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Uc(t,s,e))}return i}class ul extends Zc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hl extends Zc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dl{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&el(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=nl(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=nl(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Nc();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=tl(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Lo.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Rc())}isEqual(t){return this.batchId===t.batchId&&xo(this.mutations,t.mutations,((t,e)=>rl(t,e)))&&xo(this.baseMutations,t.baseMutations,((t,e)=>rl(t,e)))}}class fl{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){mo(t.mutations.length===n.length);let i=Oc;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new fl(t,e,n,i)}}class pl{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var gl,ml;(ml=gl||(gl={}))[ml.OK=0]="OK",ml[ml.CANCELLED=1]="CANCELLED",ml[ml.UNKNOWN=2]="UNKNOWN",ml[ml.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ml[ml.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ml[ml.NOT_FOUND=5]="NOT_FOUND",ml[ml.ALREADY_EXISTS=6]="ALREADY_EXISTS",ml[ml.PERMISSION_DENIED=7]="PERMISSION_DENIED",ml[ml.UNAUTHENTICATED=16]="UNAUTHENTICATED",ml[ml.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ml[ml.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ml[ml.ABORTED=10]="ABORTED",ml[ml.OUT_OF_RANGE=11]="OUT_OF_RANGE",ml[ml.UNIMPLEMENTED=12]="UNIMPLEMENTED",ml[ml.INTERNAL=13]="INTERNAL",ml[ml.UNAVAILABLE=14]="UNAVAILABLE",ml[ml.DATA_LOSS=15]="DATA_LOSS",new ro([4294967295,4294967295],0),Error;class yl{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function vl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wl(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bl(t,e){return vl(t,e.toTimestamp())}function El(t){return mo(!!t),Lo.fromTimestamp(function(t){const e=ya(t);return new Ro(e.seconds,e.nanos)}(t))}function Il(t,e){return Tl(t,e).canonicalString()}function Tl(t,e){const n=function(t){return new Mo(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Sl(t,e){return Il(t.databaseId,e.path)}function _l(t){const e=function(t){const e=Mo.fromString(t);return mo(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Mo.emptyPath():function(t){return mo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function Al(t,e,n){return{name:Sl(t,e),fields:n.value.mapValue.fields}}function Cl(t){let e=_l(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){mo(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Dl(t);return e instanceof Qa&&Xa(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new za(Nl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ia(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new ja(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new ja(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new dc(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Dl(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Nl(t.unaryFilter.field);return Ga.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Nl(t.unaryFilter.field);return Ga.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nl(t.unaryFilter.field);return Ga.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Nl(t.unaryFilter.field);return Ga.create(r,"!=",{nullValue:"NULL_VALUE"});default:return go()}}(t):void 0!==t.fieldFilter?function(t){return Ga.create(Nl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return go()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Qa.create(t.compositeFilter.filters.map((t=>Dl(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return go()}}(t.compositeFilter.op))}(t):go()}function Nl(t){return Vo.fromServerFormat(t.fieldPath)}function kl(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Ol{constructor(t){this.ct=t}}function xl(t){const e=Cl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?mc(e,e.limit,"L"):e}class Rl{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(va(t.integerValue));else if("doubleValue"in t){const n=va(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),ra(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(wa(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Fa(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):go()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),Uo.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Rl.bt=new Rl;class Ll{constructor(){this._n=new Pl}addToCollectionParentIndex(t,e){return this._n.add(e),Ho.resolve()}getCollectionParents(t,e){return Ho.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Ho.resolve()}deleteFieldIndex(t,e){return Ho.resolve()}deleteAllFieldIndexes(t){return Ho.resolve()}createTargetIndexes(t,e){return Ho.resolve()}getDocumentsMatchingTarget(t,e){return Ho.resolve(null)}getIndexType(t,e){return Ho.resolve(0)}getFieldIndexes(t,e){return Ho.resolve([])}getNextCollectionGroupToUpdate(t){return Ho.resolve(null)}getMinOffset(t,e){return Ho.resolve(jo.min())}getMinOffsetFromCollectionGroup(t,e){return Ho.resolve(jo.min())}updateCollectionGroup(t,e,n){return Ho.resolve()}updateIndexEntries(t,e){return Ho.resolve()}}class Pl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new ha(Mo.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new ha(Mo.comparator)).toArray()}}new Uint8Array(0);class Ml{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Ml(t,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ml.DEFAULT_COLLECTION_PERCENTILE=10,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ml.DEFAULT=new Ml(41943040,Ml.DEFAULT_COLLECTION_PERCENTILE,Ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ml.DISABLED=new Ml(-1,0,0);class Fl{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Fl(0)}static Bn(){return new Fl(-1)}}class Vl{constructor(){this.changes=new Ic((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ba.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ho.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Ul{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Bl{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&nl(n.mutation,t,fa.empty(),Ro.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Rc()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Rc()){const i=Dc();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Ac();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Dc();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Rc())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Sc();const s=kc(),o=kc();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof ol)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),nl(o.mutation,e,o.mutation.getFieldMask(),Ro.now())):s.set(e.key,fa.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Ul(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=kc();let i=new ca(((t,e)=>t-e)),r=Rc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||fa.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Rc()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Nc();c.forEach((t=>{if(!r.has(t)){const i=tl(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Ho.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return Uo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Ho.resolve(Dc());let o=-1,a=r;return s.next((e=>Ho.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Ho.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Rc()))).next((t=>({batchId:o,changes:Cc(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Uo(e)).next((t=>{let e=Ac();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Ac();return this.indexManager.getCollectionParents(t,r).next((o=>Ho.forEach(o,(o=>{const a=function(t,e){return new dc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ba.newInvalidDocument(i)))}));let n=Ac();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&nl(s.mutation,i,fa.empty(),Ro.now()),bc(e,i)&&(n=n.insert(t,i))})),n}))}}class jl{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Ho.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:El(t.createTime)}}(e)),Ho.resolve()}getNamedQuery(t,e){return Ho.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:xl(t.bundledQuery),readTime:El(t.readTime)}}(e)),Ho.resolve()}}class $l{constructor(){this.overlays=new ca(Uo.comparator),this.hr=new Map}getOverlay(t,e){return Ho.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Dc();return Ho.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Ho.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Ho.resolve()}getOverlaysForCollection(t,e,n){const i=Dc(),r=e.length+1,s=new Uo(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Ho.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new ca(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Dc(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Dc(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Ho.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new pl(e,n));let r=this.hr.get(e);void 0===r&&(r=Rc(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class ql{constructor(){this.Pr=new ha(zl.Ir),this.Tr=new ha(zl.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new zl(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new zl(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new Uo(new Mo([])),n=new zl(e,t),i=new zl(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Uo(new Mo([])),n=new zl(e,t),i=new zl(e,t+1);let r=Rc();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new zl(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class zl{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Uo.comparator(t.key,e.key)||Oo(t.pr,e.pr)}static Er(t,e){return Oo(t.pr,e.pr)||Uo.comparator(t.key,e.key)}}class Kl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ha(zl.Ir)}checkEmpty(t){return Ho.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dl(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new zl(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Ho.resolve(s)}lookupMutationBatch(t,e){return Ho.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Ho.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ho.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Ho.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new zl(e,0),i=new zl(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Ho.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ha(Oo);return e.forEach((t=>{const e=new zl(t,0),i=new zl(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Ho.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Uo.isDocumentKey(r)||(r=r.child(""));const s=new zl(new Uo(r),0);let o=new ha(Oo);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Ho.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){mo(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ho.forEach(e.mutations,(i=>{const r=new zl(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new zl(e,0),i=this.wr.firstAfterOrEqual(n);return Ho.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ho.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Hl{constructor(t){this.vr=t,this.docs=new ca(Uo.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ho.resolve(n?n.document.mutableCopy():Ba.newInvalidDocument(e))}getEntries(t,e){let n=Sc();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ba.newInvalidDocument(t))})),Ho.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Sc();const s=e.path,o=new Uo(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||$o(Bo(o),n)<=0||(i.has(o.key)||bc(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Ho.resolve(r)}getAllFromCollectionGroup(t,e,n,i){go()}Fr(t,e){return Ho.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Gl(this)}getSize(t){return Ho.resolve(this.size)}}class Gl extends Vl{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Ho.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Ql{constructor(t){this.persistence=t,this.Mr=new Ic((t=>uc(t)),hc),this.lastRemoteSnapshotVersion=Lo.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ql,this.targetCount=0,this.Br=Fl.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Ho.resolve()}getLastRemoteSnapshotVersion(t){return Ho.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ho.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Ho.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Ho.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new Fl(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Ho.resolve()}updateTargetData(t,e){return this.qn(e),Ho.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Ho.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Ho.waitFor(r).next((()=>i))}getTargetCount(t){return Ho.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Ho.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Ho.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Ho.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Ho.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Ho.resolve(n)}containsKey(t,e){return Ho.resolve(this.Nr.containsKey(e))}}class Wl{constructor(t,e){this.Lr={},this.overlays={},this.kr=new na(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Ql(this),this.indexManager=new Ll,this.remoteDocumentCache=function(t){return new Hl(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Ol(e),this.$r=new jl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new $l,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new Kl(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){uo("MemoryPersistence","Starting transaction:",t);const i=new Xl(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Ho.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class Xl extends zo{constructor(t){super(),this.currentSequenceNumber=t}}class Jl{constructor(t){this.persistence=t,this.zr=new ql,this.jr=null}static Hr(t){return new Jl(t)}get Jr(){if(this.jr)return this.jr;throw go()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Ho.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Ho.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Ho.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ho.forEach(this.Jr,(n=>{const i=Uo.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,Lo.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Ho.or([()=>Ho.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Yl{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Rc(),i=Rc();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new Yl(t,e.fromCache,n,i)}}class Zl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class tu{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!function(){var e;const n=null===(e=s())||void 0===e?void 0:e.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(t.g.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Qo.v(c())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new Zl;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(lo()<=C.DEBUG&&uo("QueryEngine","SDK will not create cache indexes for query:",wc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ho.resolve()):(lo()<=C.DEBUG&&uo("QueryEngine","Query:",wc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(lo()<=C.DEBUG&&uo("QueryEngine","The SDK decides to create cache indexes for query:",wc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gc(e))):Ho.resolve())}ji(t,e){if(fc(e))return Ho.resolve(null);let n=gc(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=mc(e,null,"F"),n=gc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Rc(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,mc(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return fc(e)||i.isEqual(Lo.min())?Ho.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Ho.resolve(null):(lo()<=C.DEBUG&&uo("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wc(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Lo.fromTimestamp(1e9===i?new Ro(n+1,0):new Ro(n,i));return new jo(r,Uo.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new ha(function(t){return(e,n)=>{let i=!1;for(const r of pc(t)){const t=Ec(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{bc(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return lo()<=C.DEBUG&&uo("QueryEngine","Using full collection scan to execute query:",wc(e)),this.zi.getDocumentsMatchingQuery(t,e,jo.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class eu{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new ca(Oo),this.rs=new Ic((t=>uc(t)),hc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Bl(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function nu(t,e){const n=yo(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Rc();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function iu(t,e){const n=yo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class ru{constructor(){this.activeTargetIds=Lc}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class su{constructor(){this.no=new ru,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ru,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class ou{io(t){}shutdown(){}}class au{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){uo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){uo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cu=null;function lu(){return null===cu?cu=268435456+Math.round(2147483648*Math.random()):cu++,"0x"+cu.toString(16)}const uu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hu{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const du="WebChannelConnection";class fu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=lu(),o=this.bo(t,e.toUriEncodedString());uo("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(uo("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw fo("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ao,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=uu[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=lu();return new Promise(((s,o)=>{const a=new io;a.setWithCredentials(!0),a.listenOnce(Zs.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ys.NO_ERROR:const e=a.getResponseJson();uo(du,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Ys.TIMEOUT:uo(du,`RPC '${t}' ${r} timed out`),o(new wo(vo.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:const n=a.getStatus();if(uo(du,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(vo).indexOf(e)>=0?e:vo.UNKNOWN}(e.status);o(new wo(t,e.message))}else o(new wo(vo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new wo(vo.UNAVAILABLE,"Connection failed."));break;default:go()}}finally{uo(du,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);uo(du,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=lu(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Xs(),o=Js(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");uo(du,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new hu({lo:e=>{d?uo(du,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(uo(du,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),uo(du,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},ho:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,no.EventType.OPEN,(()=>{d||uo(du,`RPC '${t}' stream ${i} transport opened.`)})),p(u,no.EventType.CLOSE,(()=>{d||(d=!0,uo(du,`RPC '${t}' stream ${i} transport closed`),f.Vo())})),p(u,no.EventType.ERROR,(e=>{d||(d=!0,fo(du,`RPC '${t}' stream ${i} transport errored:`,e),f.Vo(new wo(vo.UNAVAILABLE,"The operation could not be completed")))})),p(u,no.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];mo(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){uo(du,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=gl[t];if(void 0!==e)return function(t){if(void 0===t)return ho("GRPC error has no .code"),vo.UNKNOWN;switch(t){case gl.OK:return vo.OK;case gl.CANCELLED:return vo.CANCELLED;case gl.UNKNOWN:return vo.UNKNOWN;case gl.DEADLINE_EXCEEDED:return vo.DEADLINE_EXCEEDED;case gl.RESOURCE_EXHAUSTED:return vo.RESOURCE_EXHAUSTED;case gl.INTERNAL:return vo.INTERNAL;case gl.UNAVAILABLE:return vo.UNAVAILABLE;case gl.UNAUTHENTICATED:return vo.UNAUTHENTICATED;case gl.INVALID_ARGUMENT:return vo.INVALID_ARGUMENT;case gl.NOT_FOUND:return vo.NOT_FOUND;case gl.ALREADY_EXISTS:return vo.ALREADY_EXISTS;case gl.PERMISSION_DENIED:return vo.PERMISSION_DENIED;case gl.FAILED_PRECONDITION:return vo.FAILED_PRECONDITION;case gl.ABORTED:return vo.ABORTED;case gl.OUT_OF_RANGE:return vo.OUT_OF_RANGE;case gl.UNIMPLEMENTED:return vo.UNIMPLEMENTED;case gl.DATA_LOSS:return vo.DATA_LOSS;default:return go()}}(e)}(e),r=o.message;void 0===n&&(n=vo.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Vo(new wo(n,r)),u.close()}else uo(du,`RPC '${t}' stream ${i} received:`,r),f.mo(r)}})),p(o,to.STAT_EVENT,(e=>{e.stat===eo.PROXY?uo(du,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===eo.NOPROXY&&uo(du,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function pu(){return"undefined"!=typeof document?document:null}function gu(t){return new yl(t,!0)}class mu{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&uo("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class yu{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new mu(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===vo.RESOURCE_EXHAUSTED?(ho(e.toString()),ho("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===vo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new wo(vo.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return uo("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(uo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vu extends yu{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(mo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(mo(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?El(t.updateTime):El(e);return n.isEqual(Lo.min())&&(n=El(e)),new Xc(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=El(t.commitTime);return this.listener.T_(n,e)}return mo(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=function(t){return new Mo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof sl)n={update:Al(t,e.key,e.value)};else if(e instanceof ul)n={delete:Sl(t,e.key)};else if(e instanceof ol)n={update:Al(t,e.key,e.data),updateMask:kl(e.fieldMask)};else{if(!(e instanceof hl))return go();n={verify:Sl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof $c)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Gc)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw go()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:bl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:go()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class wu extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new wo(vo.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Tl(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===vo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new wo(vo.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Tl(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===vo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new wo(vo.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class bu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ho(e),this.g_=!1):uo("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Eu{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{Su(this)&&(uo("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=yo(t);e.v_.add(4),await Tu(e),e.x_.set("Unknown"),e.v_.delete(4),await Iu(e)}(this))}))})),this.x_=new bu(n,i)}}async function Iu(t){if(Su(t))for(const e of t.F_)await e(!0)}async function Tu(t){for(const e of t.F_)await e(!1)}function Su(t){return 0===yo(t).v_.size}async function _u(t,e,n){if(!Jo(e))throw e;t.v_.add(1),await Tu(t),t.x_.set("Offline"),n||(n=()=>function(t){const e=yo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{uo("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Iu(t)}))}function Au(t,e){return e().catch((n=>_u(t,n,e)))}async function Cu(t){const e=yo(t),n=Fu(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Du(e);)try{const t=await iu(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,Nu(e,t)}catch(t){await _u(e,t)}ku(e)&&Ou(e)}function Du(t){return Su(t)&&t.D_.length<10}function Nu(t,e){t.D_.push(e);const n=Fu(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function ku(t){return Su(t)&&!Fu(t).Ho()&&t.D_.length>0}function Ou(t){Fu(t).start()}async function xu(t){Fu(t).d_()}async function Ru(t){const e=Fu(t);for(const n of t.D_)e.I_(n.mutations)}async function Lu(t,e,n){const i=t.D_.shift(),r=fl.from(i,e,n);await Au(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Cu(t)}async function Pu(t,e){e&&Fu(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return go();case vo.CANCELLED:case vo.UNKNOWN:case vo.DEADLINE_EXCEEDED:case vo.RESOURCE_EXHAUSTED:case vo.INTERNAL:case vo.UNAVAILABLE:case vo.UNAUTHENTICATED:return!1;case vo.INVALID_ARGUMENT:case vo.NOT_FOUND:case vo.ALREADY_EXISTS:case vo.PERMISSION_DENIED:case vo.FAILED_PRECONDITION:case vo.ABORTED:case vo.OUT_OF_RANGE:case vo.UNIMPLEMENTED:case vo.DATA_LOSS:return!0}}(t)&&t!==vo.ABORTED}(e.code)){const n=t.D_.shift();Fu(t).Zo(),await Au(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Cu(t)}}(t,e),ku(t)&&Ou(t)}async function Mu(t,e){const n=yo(t);n.asyncQueue.verifyOperationInProgress(),uo("RemoteStore","RemoteStore received new credentials");const i=Su(n);n.v_.add(3),await Tu(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Iu(n)}function Fu(t){return t.B_||(t.B_=function(t,e,n){const i=yo(t);return i.R_(),new vu(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:xu.bind(null,t),To:Pu.bind(null,t),E_:Ru.bind(null,t),T_:Lu.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await Cu(t)):(await t.B_.stop(),t.D_.length>0&&(uo("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class Vu{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Vu(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wo(vo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uu(t,e){if(ho("AsyncQueue",`${e}: ${t}`),Jo(t))return new wo(vo.UNAVAILABLE,`${e}: ${t}`);throw t}class Bu{constructor(){this.queries=new Ic((t=>vc(t)),yc),this.onlineState="Unknown",this.K_=new Set}}class ju{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ic((t=>vc(t)),yc),this.pa=new Map,this.ya=new Set,this.wa=new ca(Uo.comparator),this.Sa=new Map,this.ba=new ql,this.Da={},this.Ca=new Map,this.va=Fl.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function $u(t,e,n){const i=yo(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=yo(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&function(t){t.K_.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function qu(t,e){const n=yo(t),i=e.batch.batchId;try{const t=await function(t,e){const n=yo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Ho.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);mo(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Rc();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Hu(n,i,null),Ku(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Gu(n,t)}catch(t){await Ko(t)}}async function zu(t,e,n){const i=yo(t);try{const t=await function(t,e){const n=yo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(mo(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Hu(i,e,n),Ku(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Gu(i,t)}catch(n){await Ko(n)}}function Ku(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function Hu(t,e,n){const i=yo(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}async function Gu(t,e,n){const i=yo(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=Yl.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=yo(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ho.forEach(e,(e=>Ho.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Ho.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Jo(t))throw t;uo("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Qu(t,e){const n=yo(t);if(!n.currentUser.isEqual(e)){uo("SyncEngine","User change. New user:",e.toKey());const t=await nu(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new wo(vo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Gu(n,t.us)}}function Wu(t){const e=yo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zu.bind(null,e),e}class Xu{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=gu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new eu(t,e,n,i)}(this.persistence,new tu,t.initialUser,this.serializer)}createPersistence(t){return new Wl(Jl.Hr,this.serializer)}createSharedClientState(t){return new su}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ju{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>$u(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qu.bind(null,this.syncEngine),await async function(t,e){const n=yo(t);e?(n.v_.delete(2),await Iu(n)):e||(n.v_.add(2),await Tu(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Bu}createDatastore(t){const e=gu(t.databaseInfo.databaseId),n=function(t){return new fu(t)}(t.databaseInfo);return function(t,e,n,i){return new wu(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Eu(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>$u(this.syncEngine,t,0)),au.D()?new au:new ou)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new ju(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=yo(t);uo("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Tu(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class Yu{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=oo.UNAUTHENTICATED,this.clientId=ko.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{uo("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(uo("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wo(vo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Uu(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Zu(t,e){t.asyncQueue.verifyOperationInProgress(),uo("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await nu(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function th(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){uo("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===vo.FAILED_PRECONDITION||t.code===vo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await Zu(t,new Xu)}}else uo("FirestoreClient","Using default OfflineComponentProvider"),await Zu(t,new Xu);return t._offlineComponents}(t);uo("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Mu(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Mu(e.remoteStore,n))),t._onlineComponents=e}function eh(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(uo("FirestoreClient","Using user provided OnlineComponentProvider"),await th(t,t._uninitializedComponentsProvider._online)):(uo("FirestoreClient","Using default OnlineComponentProvider"),await th(t,new Ju))),t._onlineComponents}(t).then((t=>t.syncEngine))}function nh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const ih=new Map;function rh(t){if(!Uo.isDocumentKey(t))throw new wo(vo.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":go()}function oh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new wo(vo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sh(t);throw new wo(vo.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class ah{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new wo(vo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wo(vo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new wo(vo.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new wo(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new wo(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new wo(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ch{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ah({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new wo(vo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new wo(vo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ah(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Io;switch(t.type){case"firstParty":return new Ao(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new wo(vo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=ih.get(t);e&&(uo("ComponentProvider","Removing Datastore"),ih.delete(t),e.terminate())}(this),Promise.resolve()}}class lh{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new lh(this.firestore,t,this._query)}}class uh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new uh(this.firestore,t,this._key)}}class hh extends lh{constructor(t,e,n){super(t,e,function(t){return new dc(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new uh(this.firestore,null,new Uo(t))}withConverter(t){return new hh(this.firestore,t,this._path)}}class dh{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new mu(this,"async_queue_retry"),this._u=()=>{const t=pu();t&&uo("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=pu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=pu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new bo;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Jo(t))throw t;uo("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw ho("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=Vu.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&go()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class fh extends ch{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new dh,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ph(this),this._firestoreClient.terminate()}}function ph(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Ta(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,nh(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Yu(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class gh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gh(ga.fromBase64String(t))}catch(t){throw new wo(vo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new gh(ga.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class mh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new wo(vo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class yh{constructor(t){this._methodName=t}}class vh{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new wo(vo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new wo(vo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Oo(this._lat,t._lat)||Oo(this._long,t._long)}}const wh=/^__.*__$/;class bh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new ol(t,this.data,this.fieldMask,e,this.fieldTransforms):new sl(t,this.data,e,this.fieldTransforms)}}function Eh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw go()}}class Ih{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Ih(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return xh(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Eh(this.du)&&wh.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Th{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||gu(t)}Su(t,e,n,i=!1){return new Ih({du:t,methodName:e,wu:n,path:Vo.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sh(t){const e=t._freezeSettings(),n=gu(t._databaseId);return new Th(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _h(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Nh("Data must be an object, but it was:",o,i);const a=Ch(i,o);let c,l;if(s.merge)c=new fa(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=kh(e,i,n);if(!o.contains(r))throw new wo(vo.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Rh(t,r)||t.push(r)}c=new fa(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new bh(new Va(a),c,l)}function Ah(t,e){if(Dh(t=E(t)))return Nh("Unsupported field value:",e,t),Ch(t,e);if(t instanceof yh)return function(t,e){if(!Eh(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Ah(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=E(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fc(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Ro.fromDate(t);return{timestampValue:vl(e.serializer,n)}}if(t instanceof Ro){const n=new Ro(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vl(e.serializer,n)}}if(t instanceof vh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gh)return{bytesValue:wl(e.serializer,t._byteString)};if(t instanceof uh){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Il(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${sh(t)}`)}(t,e)}function Ch(t,e){const n={};return aa(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(t,((t,i)=>{const r=Ah(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Dh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ro||t instanceof vh||t instanceof gh||t instanceof uh||t instanceof yh)}function Nh(t,e,n){if(!Dh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=sh(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function kh(t,e,n){if((e=E(e))instanceof mh)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(Oh)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mh(...e.split("."))._internalPath}catch(i){throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw xh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Oh=new RegExp("[~\\*/\\[\\]]");function xh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new wo(vo.INVALID_ARGUMENT,a+t+c)}function Rh(t,e){return t.some((t=>t.isEqual(e)))}function Lh(t,e){return function(t,e){const n=new bo;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Wu(t);try{const t=await function(t,e){const n=yo(t),i=Ro.now(),r=e.reduce(((t,e)=>t.add(e.key)),Rc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Sc(),c=Rc();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=il(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new ol(t.key,e,Ua(e.value.mapValue),Jc.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Cc(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new ca(Oo)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Gu(i,t.changes),await Cu(i.remoteStore)}catch(t){const e=Uu(t,"Failed to persist write");n.reject(e)}}(await eh(t),e,n))),n.promise}(function(t){return t._firestoreClient||ph(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}new WeakMap,function(t,e=!0){ao="10.8.0",ot(new I("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new fh(new So(t.getProvider("auth-internal")),new Do(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new wo(vo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),dt(so,"4.4.2",t),dt(so,"4.4.2","esm2017")}(),function(t=ht()){const e=at(t=E(t),he);e.isInitialized()?e.getImmediate():function(t,e={}){const n=at(t,he);if(n.isInitialized()){const t=n.getImmediate();if(p(e,n.getOptions()))return t;throw ve.create("already-initialized")}n.initialize({options:e})}(t)}(ut({apiKey:"AIzaSyA8M7Srd08oiO2TdQM1SOcJrNTTqFi6rvU",authDomain:"sevida-co.firebaseapp.com",databaseURL:"https://sevida-co-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"sevida-co",storageBucket:"sevida-co.appspot.com",messagingSenderId:"103373890355",appId:"1:103373890355:web:4b030e8cf63bc4af681446",measurementId:"G-5FYKB8KW6G"}));const Ph=function(t,e,...n){if(t=E(t),1===arguments.length&&(e=ko.newId()),function(t,e,n){if(!n)throw new wo(vo.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("doc","path",e),t instanceof ch){const i=Mo.fromString(e,...n);return rh(i),new uh(t,null,new Uo(i))}{if(!(t instanceof uh||t instanceof hh))throw new wo(vo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Mo.fromString(e,...n));return rh(i),new uh(t.firestore,t instanceof hh?t.converter:null,new Uo(i))}}(function(t,e){const n=at(ht(),"firestore").getImmediate({identifier:"(default)"});if(!n._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&function(t,e,n,i={}){var s;const o=(t=oh(t,ch))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=oo.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[r(JSON.stringify({alg:"none",type:"JWT"})),r(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new wo(vo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new oo(o)}t._authCredentials=new To(new Eo(e,n))}}(n,...t)}return n}(),"Meow/2021-09-14");console.log("meow meow!"),function(t,e,n){t=oh(t,uh);const i=oh(t.firestore,fh),r=function(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}(t.converter,{description:"A delicious vanilla latte",price:3.99,milk:"Whole",vegan:!1},n);Lh(i,[_h(Sh(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Jc.none())])}(Ph)})();